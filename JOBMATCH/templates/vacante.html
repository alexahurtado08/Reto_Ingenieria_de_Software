{% load static %}
<!doctype html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestión de Vacantes - JobMatch AI</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tabler/icons-webfont@2.30.0/tabler-icons.min.css">
    <link rel="stylesheet" href="{% static 'dashboard/css/styles.css' %}">
</head>
  <body>
    <div class="dashboard-container">
      <nav class="sidebar">
        <div class="logo-container">
          <img
            src="https://placehold.co/32x32/4318D1/4318D1"
            alt="Logo JobMatch AI"
            class="logo-image"
          />
          <h1 class="logo-text">JOBMATCH AI</h1>
        </div>
        <ul class="nav-menu">
          <li class="nav-item">
            <a href="{% url 'dashboard' %}" class="nav-link">
              <i class="ti ti-layout-dashboard"></i>
              <span class="nav-text">Panel</span>
            </a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link">
              <i class="ti ti-activity"></i>
              <span class="nav-text">Campañas Activas</span>
            </a>
          </li>
          <li class="nav-item active">
            <a href="{% url 'vacante' %}" class="nav-link">
              <i class="ti ti-briefcase"></i>
              <span class="nav-text">Vacante</span>
            </a>
          </li>
          <li class="nav-item">
            <a href="{% url 'create_campaign' %}" class="nav-link">
              <i class="ti ti-api"></i>
              <span class="nav-text">Anuncios API</span>
            </a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link">
              <i class="ti ti-settings"></i>
              <span class="nav-text">Configuración</span>
            </a>
          </li>
        </ul>
        <div class="logout-container">
          <i class="ti ti-logout"></i>
          <span class="nav-text">Cerrar Sesión</span>
        </div>
      </nav>

      <!-- Contenido específico de Vacantes -->
      <main class="main-content">
        <header class="main-header">
            <div class="welcome-container">
                <h2 class="welcome-heading">Vacantes Activas</h2>
            </div>
            <div class="header-actions">
                
                    <i class="ti ti-plus"></i>
                    Nueva Vacante
                </a>
            </div>
        </header>

        <!-- Listado de Vacantes -->
        <section class="vacancies-list">
            <!-- Vacante 1 -->
            <article class="vacancy-card" data-id="1" data-title="Desarrollador Frontend" data-description="Buscamos desarrollador con experiencia en React y TypeScript">
                <div class="vacancy-info">
                    <h3 class="vacancy-title">Desarrollador Frontend Senior</h3>
                    <div class="vacancy-meta">
                        <span class="vacancy-location">Medellín, Colombia</span>
                        <span class="vacancy-salary">$5,000,000 - $7,000,000 COP</span>
                        <span class="vacancy-date">Publicada: 15/04/2024</span>
                    </div>
                </div>
                <div class="vacancy-actions">
                    <button class="btn-secondary" onclick="showVacancyDetails(1)">
                        <i class="ti ti-eye"></i>
                        Ver Detalles
                    </button>
                    <button class="btn-primary" onclick="createCampaignFromVacancy(1)">
                        <i class="ti ti-rocket"></i>
                        Crear Campaña
                    </button>
                </div>
            </article>

            <!-- Vacante 2 -->
            <article class="vacancy-card" data-id="2" data-title="Diseñador UX/UI" data-description="Buscamos diseñador con portfolio demostrable">
                <div class="vacancy-info">
                    <h3 class="vacancy-title">Diseñador UX/UI Junior</h3>
                    <div class="vacancy-meta">
                        <span class="vacancy-location">Remoto</span>
                        <span class="vacancy-salary">$3,000,000 - $4,000,000 COP</span>
                        <span class="vacancy-date">Publicada: 10/04/2024</span>
                    </div>
                </div>
                <div class="vacancy-actions">
                    <button class="btn-secondary" onclick="showVacancyDetails(2)">
                        <i class="ti ti-eye"></i>
                        Ver Detalles
                    </button>
                    <button class="btn-primary" onclick="createCampaignFromVacancy(2)">
                        <i class="ti ti-rocket"></i>
                        Crear Campaña
                    </button>
                </div>
            </article>
        </section>

        <!-- Modal de Detalles -->
        <div id="vacancyModal" class="modal">
            <div class="modal-content">
                <span class="close-modal" onclick="closeModal()">&times;</span>
                <h3 id="modalTitle"></h3>
                <div class="modal-body">
                    <p id="modalDescription"></p>
                    <div class="modal-details">
                        <div class="detail-item">
                            <i class="ti ti-map-pin"></i>
                            <span id="modalLocation"></span>
                        </div>
                        <div class="detail-item">
                            <i class="ti ti-coin"></i>
                            <span id="modalSalary"></span>
                        </div>
                        <div class="detail-item">
                            <i class="ti ti-calendar"></i>
                            <span id="modalDate"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>

<script>
    // Mostrar detalles de la vacante
    function showVacancyDetails(vacancyId) {
        const vacancy = document.querySelector(`.vacancy-card[data-id="${vacancyId}"]`);
        document.getElementById('modalTitle').textContent = vacancy.dataset.title;
        document.getElementById('modalDescription').textContent = vacancy.dataset.description;
        document.getElementById('modalLocation').textContent = vacancy.querySelector('.vacancy-location').textContent;
        document.getElementById('modalSalary').textContent = vacancy.querySelector('.vacancy-salary').textContent;
        document.getElementById('modalDate').textContent = vacancy.querySelector('.vacancy-date').textContent;
        document.getElementById('vacancyModal').style.display = 'block';
    }

    // Crear campaña desde vacante
    function createCampaignFromVacancy(vacancyId) {
        const vacancy = document.querySelector(`.vacancy-card[data-id="${vacancyId}"]`);
        const title = vacancy.dataset.title;
        const description = vacancy.dataset.description;
        
        // Redirigir a creación de campaña con parámetros
        window.location.href = `{% url 'create_campaign' %}?title=${encodeURIComponent(title)}&description=${encodeURIComponent(description)}`;
    }

    // Cerrar modal
    function closeModal() {
        document.getElementById('vacancyModal').style.display = 'none';
    }

    // Cerrar modal al hacer click fuera
    window.onclick = function(event) {
        const modal = document.getElementById('vacancyModal');
        if (event.target === modal) {
            modal.style.display = 'none';
        }
    }
</script>
</body>
</html>